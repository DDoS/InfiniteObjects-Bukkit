name: tree

variables:
  height: ranI=25-30
  minLeafHeight: ranI=7-10

setters:
  leaves:
    type: simple
    properties:
      material: Leaves
      data: 3
  wood:
    type: simple
    properties:
      material: Leaves
      data: 3

conditions:
  ground:
    shape: cuboid
    mode: include
    size:
      x: 2
      y: 1
      z: 2
    position:
      x: 0
      y: -1
      z: 0
    check:
      - Grass
      - Dirt
  main:
    shape: cuboid
    mode: exclude
    size:
      x: 6
      y: height
      z: 6
    position:
      x: -2
      y: 2
      z: -2
    check:
      - Water
      - Grass
      - Dirt
      - Stone
      - Log
      - Leaves

instructions:
  leafPod:
    type: shape
    variables:
      angle: ranF(0, 2) * PI
      offsetX: sin(angle) * 6
      offsetZ: cos(angle) * 6
    shapes:
      leafPod:
        type: sphere
        size:
          x: ranI=2-4
          y: ranI=2-4
          z: ranI=2-4
        position:
          x: offsetX
          y: minLeafHeight
          z: offsetZ
        material: leaves
      branch:
        type: line
        size:
          x: offsetX
          y: 3
          z: offsetZ
        position:
          x: 0
          y: minLeafHeight - 3
          z: 0
        material: wood
  leafPods:
    type: repeat
    repeat: leafPod
    times: ranI=5-8
    increment:
      minLeafHeight: ranI=1-3
  main:
    type: shape
    shapes:
      canopy:
        type: sphere
        size:
          x: ranI=5-6
          y: ranI=2-3
          z: ranI=5-6
        position:
          x: 0
          y: height + 1
          z: 0
        material: leaves
      trunk:
        type: cuboid
        size:
          x: 2
          y: height
          z: 2
        position:
          x: 0
          y: 0
          z: 0
        material: wood
  test:
    type: block
    position:
      x: 0
      y: height
      z: 0
    material: wood
    outer: true
