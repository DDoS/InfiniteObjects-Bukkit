name: test-tree

variables:
  height: ranI=20-30
  minLeafHeight: ranI=10-15
  
materials:
  leaves:
    type: simple
    properties:
      material: leaf
      data: 3
  wood:
    type: simple
    properties:
      material: log
      data: 3
  test:
    type: inner-outer
    properties:
      inner:
        material: log
        data: 2
      outer:
        material: leaf
        data: 4
  
instructions:
  trunk:
    type: place
    shapes:
      trunk:
        type: cuboid
        properties:
          width: 2
          height: height
          depth: 2
        position:
          x: 0
          y: 0
          z: 0
        material: wood
  leafPod:
    type: place
    variables:
      angle: ranF(0, 2 * PI);
      offsetX: sin(angle) * 4
      offsetZ: cos(angle) * 4
    shapes:
      leafPod:
        type: sphere
        properties:
          size:
            x: ranI=2-4
            y: ranI=2-4
            z: ranI=2-4
        position:
          x: offsetX
          y: minLeafHeight
          z: offsetZ
        material: leaves
      branch:
        type: line
        properties:
          length:
            x: offsetX
            y: 3
            z: offsetZ
        position:
          x: 0
          y: minLeafHeight - 3
          z: 0
        material: wood
  leafPods:
    type: repeat
    name: leafPod
    times: ranI=1-3
    increment:
      minLeafHeight: ranI=1-3
